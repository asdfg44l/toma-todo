(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],d=0,f=[];d<r.length;d++)o=r[d],i[o]&&f.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(f.length)f.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,r=1;r<s.length;r++){var c=s[r];0!==i[c]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},i={app:0},n=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/toma-todo/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},3556:function(t,e,s){t.exports=s.p+"img/edit.acef7b73.svg"},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},n=[],o={name:"app"},r=o,c=(s("5c0b"),s("2877")),l=Object(c["a"])(r,i,n,!1,null,null,null),u=l.exports,d=s("8c4f"),f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container-fluid"},[t._m(0),s("div",{staticClass:"row mt-2"},[s("div",{staticClass:"col-6"},[s("div",{staticClass:"tomato"}),s("timer")],1),s("div",{staticClass:"col-4 pt-5 ml-5"},[s("task-list")],1)])]),s("div",{staticClass:"sideBox d-flex bg-white"},[t._m(1),s("div",{staticClass:"sideTable"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-md-10"},[s("todo-list")],1)])])])])])},p=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-10"},[s("p",{staticClass:"currentTime mb-0"},[t._v("2019/8/2. Am 12:25")]),s("p",{staticClass:"completeCount mb-0 text-center"},[t._v("1/5 completed")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"controlBox bg-tomaRed"},[s("div",{staticClass:"list-group mt-5",attrs:{id:"list-tab",role:"tablist"}},[s("button",{staticClass:"functionBtn closeBox btn btn-block mt-4 rounded-0",attrs:{type:"button","data-toggle":"list",role:"tab"}},[s("i",{staticClass:"far fa-clock fa-3x"})]),s("button",{staticClass:"functionBtn openBox btn btn-block mt-4 rounded-0",attrs:{type:"button","data-toggle":"list",role:"tab","data-set":"todolist"}},[s("i",{staticClass:"far fa-list-alt fa-3x"})]),s("button",{staticClass:"functionBtn openBox btn btn-block mt-4 rounded-0",attrs:{type:"button","data-toggle":"list",role:"tab"}},[s("i",{staticClass:"far fa-chart-bar fa-3x"})])])])}],m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-10"},[s("div",{staticClass:"timer display-3 roboMono text-center wordSpacing"},[t._v("\n                    "+t._s(t._f("timer")(t.currentTime))+"\n                ")]),t.statusSwitch?s("div",{staticClass:"todoStatus container mt-5"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("button",{staticClass:"btn btn-block btn-tomaRed roboMono",attrs:{type:"button"},on:{click:t.todoContinue}},[t._v("continue")])]),s("div",{staticClass:"col-6"},[s("button",{staticClass:"btn btn-block btn-tomaRed roboMono",attrs:{type:"button"},on:{click:t.todoFinish}},[t._v("finish")])])])]):s("div",{staticClass:"timerControll d-flex justify-content-center align-items-center mt-5"},[s("div",{staticClass:"w-50"},[t.running?s("button",{staticClass:"btn btn-block btn-tomaRed roboMono rounded-pill",on:{click:t.pause}},[s("span",{staticClass:"wordSpacing text-center"},[t._v("pause")])]):s("button",{staticClass:"btn btn-block btn-tomaRed roboMono rounded-pill",on:{click:t.countDown}},[s("span",{staticClass:"wordSpacing text-center"},[t._v("start")])])]),s("div",{staticClass:"refresh"},[s("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.timerReset}},[s("i",{staticClass:"fas fa-redo fa-2x text-tomaRed"})])])])])])])])},v=[],b={data:function(){return{workTime:10,restTime:5,currentTime:10,running:!1,statusSwitch:!1}},methods:{countDown:function(){var t=this;function e(){t.currentTime-=1,0===t.currentTime&&(clearInterval(t.running),t.running=!1,t.timerReset(t.statusSwitch),t.statusSwitch=!t.statusSwitch)}t.running=setInterval(e,1e3)},pause:function(){var t=this;clearInterval(t.running),t.running=!1},timerReset:function(t){this.currentTime=t?this.workTime:this.restTime},todoFinish:function(){this.countDown()},todoContinue:function(){this.countDown()}},filters:{timer:function(t){var e=Math.floor(t/60),s=t%60;e<10&&(e="0"+e),s<10&&(s="0"+s);var a=e+":"+s;return a}}},h=b,g=Object(c["a"])(h,m,v,!1,null,null,null),C=g.exports,_=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-4"},[s("h3",{staticClass:"text-center"},[t._v("MY FIRST TASK")]),s("div",{staticClass:"card waitingWrap mt-3"},[s("div",{staticClass:"card-body"},[s("ul",{staticClass:"waitingList pl-2"},[s("li",{staticClass:"first mb-3"},[s("i",{staticClass:"fas fa-play-circle"}),t._v("asasas")]),s("li",{staticClass:"others mb-3"},[t._v("asasasasa")]),s("li",{staticClass:"others mb-3"},[t._v("asasasasa")]),s("li",{staticClass:"others mb-3"},[t._v("asasasasa")]),s("li",{staticClass:"others mb-3"},[t._v("asasasasa")])])])])])}],w={data:function(){return{}}},x=w,T=Object(c["a"])(x,_,y,!1,null,null,null),k=T.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"mt-4"},[a("div",{staticClass:"todoTitle"},[a("div",{staticClass:"row justify-content-between mb-3"},[t._m(0),a("div",{staticClass:"col-6"},[a("div",{staticClass:"input-group justify-content-end mb-0"},[a("p",{staticClass:"mb-0 mr-1 font-weight-bold"},[t._v(t._s(t._f("dateTime")(t.todoDate)))]),a("div",{staticClass:"input-group-append"},[a("v-date-picker",{staticClass:"Vcalendar",attrs:{color:"red",locale:"en",popover:{placement:"bottom",visibility:"click"}},model:{value:t.todoDate,callback:function(e){t.todoDate=e},expression:"todoDate"}},[a("button",{staticClass:"bg-white",attrs:{type:"button"}},[a("img",{attrs:{src:s("3556"),width:"20",height:"20"}})])])],1)])])])]),a("div",{staticClass:"todoGroup input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"todoInput box-size-cancel form-control roboMono bg-secondary border-0",attrs:{type:"text",disabled:Boolean(t.cacheKey),placeholder:"Add new tasks"},domProps:{value:t.input},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTodo(e)},input:function(e){e.target.composing||(t.input=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"todoInputBtn btn btn-secondary",on:{click:t.addTodo}},[a("i",{staticClass:"fas fa-plus text-deepRed"})])])]),t.Valid.inValid?a("p",{staticClass:"text-danger mb-0"},[t._v(t._s(t.Valid.message))]):t._e(),a("div",{staticClass:"card border-0 my-4"},[t._m(1),a("div",{staticClass:"card-body bg-lightRed p-0"},[a("table",{staticClass:"table mt-2"},t._l(t.todoList,function(e,s){return a("tr",{key:s},[a("td",{staticClass:"todo border-0",attrs:{width:"250"}},[a("span",{staticClass:"font-weight-bold text-primary",class:{"d-none":s==t.cacheKey}},[t._v(t._s(e.work))]),s==t.cacheKey?a("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],attrs:{type:"text"},domProps:{value:t.input},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateTodo(s)},input:function(e){e.target.composing||(t.input=e.target.value)}}}):t._e()]),a("td",{staticClass:"border-0"},[a("div",[t._m(2,!0),a("button",{staticClass:"btn p-0 mr-3",attrs:{type:"button"},on:{click:function(e){return t.removeTodo(s)}}},[a("i",{staticClass:"fas fa-trash-alt text-primary"})]),a("button",{staticClass:"btn p-0 mr-3",attrs:{type:"button"},on:{click:function(e){return t.editTodo(s)}}},[a("i",{staticClass:"fas fa-edit text-primary"})])])])])}),0)])]),t._m(3)])],1)},S=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-4"},[s("p",{staticClass:"font-weight-bold mb-0"},[t._v("To do List")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-head p-3 bg-info"},[s("h5",{staticClass:"card-title text-white font-md mb-0"},[t._v("To do")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"btn p-0 mr-3",attrs:{type:"button"}},[s("i",{staticClass:"far fa-play-circle text-primary"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card border-0"},[s("div",{staticClass:"card-head p-3 bg-info"},[s("h5",{staticClass:"card-title text-white font-md mb-0"},[t._v("Done")])]),s("div",{staticClass:"card-body bg-lightRed p-0"},[s("table",{staticClass:"table mt-2"},[s("tr",[s("td",{staticClass:"todo font-weight-bold text-primary border-0",attrs:{width:"160"}},[t._v("mission")]),s("td",{staticClass:"todo font-weight-bold text-primary border-0"},[t._v("25min")])])])])])}],D=(s("8e6e"),s("ac6a"),s("456d"),s("28a5"),s("bd86")),I=s("2f62");function j(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function $(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?j(s,!0).forEach(function(e){Object(D["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):j(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var P=firebase.database().ref("/worklist/"),E={data:function(){return{input:"",todoDate:new Date,cacheKey:""}},methods:{getTodo:function(){this.$store.dispatch("getTodo")},addTodo:function(){this.$store.dispatch("addTodo",this.input),this.input=""},editTodo:function(t){this.cacheKey==t?this.cacheKey="":this.cacheKey=t},updateTodo:function(t){var e=this;this.cacheKey="",this.$store.state.Valid.inValid||(P.child(t).update({work:this.input}).then(function(){return e.$store.dispatch("getTodo")}),this.input="")},removeTodo:function(t){this.$store.dispatch("removeTodo",t)}},computed:$({},Object(I["b"])(["isLoading","todoList","Valid"])),watch:{input:function(){var t=/[^\a-\z\A-\Z0-9\u4E00-\u9FA5\@\.]/g;t.test(this.input)?this.$store.commit("VALID",{inValid:!0,message:"格式不符"}):this.$store.commit("VALID",{inValid:!1,message:""})}},filters:{ISOtime:function(t){t*=1e3;var e=new Date(t);return e=e.toISOString().split("T")[0],e},dateTime:function(t){var e=t.toDateString(),s=e.split(" "),a=s[1]+" "+s[3];return a}}},L=E,V=Object(c["a"])(L,O,S,!1,null,null,null),R=V.exports,A=s("1157"),N=s.n(A),B={data:function(){return{}},mounted:function(){N()(".openBox").on("click",function(){N()(".sideBox").toggleClass("active")}),N()(".closeBox").on("click",function(){N()(".sideBox").removeClass("active")})},components:{timer:C,taskList:k,todoList:R},created:function(){var t=JSON.parse(sessionStorage.getItem("user"));this.$store.commit("USER",t),this.$store.dispatch("getTodo")}},U=B,M=(s("d012"),Object(c["a"])(U,f,p,!1,null,null,null)),K=M.exports,F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container text-center"},[s("h1",[t._v("Firebase Auth Test")]),s("div",{staticClass:"row justify-content-center mt-5"},[s("div",{staticClass:"col-4"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.authPop}},[t._v("使用google註冊(Popup)")])]),s("div",{staticClass:"col-4"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){}}},[t._v("disabled")])])]),s("div",{staticClass:"row justify-content-center mt-5"},[s("div",{staticClass:"col-4"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.getCurrentUser}},[t._v("查詢當前使用者")])]),s("div",{staticClass:"col-4"},[s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.signOut}},[t._v("登出")])])]),s("div",{staticClass:"row justify-content-center mt-5"},[s("div",{staticClass:"col-4"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.toIndex}},[t._v("前往首頁")])])])])])},G=[],J={data:function(){return{}},methods:{authPop:function(){this.$store.dispatch("authPop")},getCurrentUser:function(){this.$store.dispatch("getCurrentUser")},signOut:function(){firebase.auth().signOut().then(function(){sessionStorage.clear(),console.log("User signOut")}).catch(function(t){return t})},toIndex:function(){this.$router.push("/index")}}},W=J,q=Object(c["a"])(W,F,G,!1,null,null,null),z=q.exports,Y=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Z=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-center"},[t._v("RWD Test")]),s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4"},[s("div",{staticClass:"list-group d-none d-md-block"},[s("a",{staticClass:"list-group-item list-group-item-action active",attrs:{href:"#"}},[t._v("\n                        Cras justo odio\n                    ")]),s("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"}},[t._v("Dapibus ac facilisis in")]),s("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"}},[t._v("Morbi leo risus")]),s("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"}},[t._v("Porta ac consectetur ac")]),s("a",{staticClass:"list-group-item list-group-item-action disabled",attrs:{href:"#",tabindex:"-1","aria-disabled":"true"}},[t._v("Vestibulum at eros")])]),s("div",{staticClass:"form-group d-md-none"},[s("label",{attrs:{for:"exampleFormControlSelect1"}},[t._v("Example select")]),s("select",{staticClass:"form-control",attrs:{id:"exampleFormControlSelect1"}},[s("option",[t._v("1")]),s("option",[t._v("2")]),s("option",[t._v("3")]),s("option",[t._v("4")]),s("option",[t._v("5")])])])]),s("div",{staticClass:"col-md-8"},[s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",[t._v("星期一")]),s("th",[t._v("星期二")]),s("th",[t._v("星期三")]),s("th",[t._v("星期四")])])]),s("tbody",[s("tr",[s("td",[t._v("吃飯")]),s("td",[t._v("睡覺")]),s("td",[t._v("洗澡")]),s("td",[t._v("打東東")])])])])])])])])}],H=(s("ffbc"),{}),Q=Object(c["a"])(H,Y,Z,!1,null,null,null),X=Q.exports;a["a"].use(d["a"]);var tt=new d["a"]({routes:[{path:"*",redirect:"/auth"},{path:"/auth",name:"auth",component:z},{path:"/rwd",name:"rwd",component:X},{path:"/index",name:"index",component:K,meta:{requiresAuth:!0},children:[{path:"/todolist",name:"todolist",component:R}]}]}),et=new firebase.auth.GoogleAuthProvider,st={state:{},actions:{authPop:function(t){var e=t.commit;firebase.auth().signInWithPopup(et).then(function(t){var e=t.user;return e}).then(function(t){var s=t.displayName,a=t.uid;e("USER",{userName:s,userID:a});var i=firebase.database().ref("/identity/");i.child(s).once("value").then(function(t){var e=firebase.database().ref("".concat(a));if(!t.val()){i.child(s).set({name:s,userID:a}).catch(function(t){return t});var n=new Date,o=n.getTime();e.push({timeStamp:o,work:"歡迎使用 Tomado",isComplete:!1}),console.log("hello new User")}})}).catch(function(t){return t})},getCurrentUser:function(t){var e=t.commit,s=firebase.auth().currentUser;if(!s)return console.log("未登入"),"";var a=s.displayName,i=s.uid;e("USER",{userName:a,userID:i}),sessionStorage.setItem("user",JSON.stringify({userName:a,userID:i}))}},mutations:{},getters:{}};a["a"].use(I["a"]);var at=new I["a"].Store({state:{user:{userName:"",userID:""},todoList:{},isLoading:!1,Valid:{inValid:!1,message:""},input:"",todoRef:firebase.database()},actions:{getTodo:function(t){t.commit("ISLOADING",!0),t.state.todoRef.ref("".concat(t.state.user.userID)).once("value").then(function(t){var e=t.val();return e}).then(function(e){t.commit("TODOLIST",e)}).then(function(){return t.commit("ISLOADING",!1)})},addTodo:function(t,e){if(!t.state.Valid.inValid){var s=e;if(""!=s){var a=new Date,i=a.getTime();t.state.todoRef.ref("".concat(t.state.user.userID)).child("".concat(i)).set({timeStamp:i,work:s,isComplete:!1}).then(function(){t.commit("INPUT",""),t.dispatch("getTodo")}).catch(function(t){alert(t)})}else t.commit("VALID",{inValid:!0,message:"內容不得為空"})}},removeTodo:function(t,e){t.state.todoRef.ref("".concat(t.state.user.userID)).child("".concat(e)).remove(),t.dispatch("getTodo")},completeTodo:function(t,e){t.state.todoRef.ref("".concat(t.state.user.userID)).child("".concat(e)).update({isComplete:!0}).then(function(){return t.dispatch("getTodo")})}},mutations:{ISLOADING:function(t,e){t.isLoading=e},TODOLIST:function(t,e){t.todoList=e},INPUT:function(t,e){t.input=e},VALID:function(t,e){var s=e.inValid,a=e.message;t.Valid.inValid=s,t.Valid.message=a},USER:function(t,e){t.user=e}},getters:{isLoading:function(t){return t.isLoading},todoList:function(t){return t.todoList},Valid:function(t){return t.Valid},user:function(t){return t.user}},modules:{googleAuth:st}}),it=s("9062"),nt=s.n(it),ot=(s("e40d"),s("5887")),rt=s.n(ot);s("4989");a["a"].use(rt.a,{componentPrefix:"v"}),a["a"].config.productionTip=!1,a["a"].component("loading",nt.a),new a["a"]({router:tt,store:at,render:function(t){return t(u)}}).$mount("#app"),tt.beforeEach(function(t,e,s){if(t.meta.requiresAuth){var a=firebase.auth().currentUser;a?s():(console.log("尚未登入"),s({path:"auth"}))}else s()})},"5c0b":function(t,e,s){"use strict";var a=s("5e27"),i=s.n(a);i.a},"5e27":function(t,e,s){},d012:function(t,e,s){"use strict";var a=s("d0f1"),i=s.n(a);i.a},d0f1:function(t,e,s){},f052:function(t,e,s){},ffbc:function(t,e,s){"use strict";var a=s("f052"),i=s.n(a);i.a}});
//# sourceMappingURL=app.d6541a48.js.map